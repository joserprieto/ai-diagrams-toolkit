%%{
  init: {
    'theme': 'base',
    'themeVariables': {
      'primaryColor': '#E8F5E9',
      'primaryTextColor': '#000',
      'primaryBorderColor': '#4CAF50',
      'lineColor': '#2E7D32',
      'secondaryColor': '#E3F2FD',
      'tertiaryColor': '#FFEBEE',
      'background': '#ffffff',
      'mainBkg': '#ffffff',
      'secondBkg': '#f5f5f5',
      'edgeLabelBackground': '#ffffff'
    }
  }
}%%
graph TD
    %% =========================================
    %% Online Food Delivery Platform - Order Flow
    %% Perspective 1: Process Flow
    %% =========================================
    %% Semantic naming and color application
    %% Following conventions from CLAUDE.md
    %% =========================================

    %% Start point
    CustomerOrder([Customer places order]):::info

    %% Validation step
    ValidateOrder{Items available?}:::warning

    %% Error path
    ItemsUnavailable[Notify customer - unavailable]:::error
    OrderCancelled([Order cancelled]):::inactive

    %% Payment processing
    ProcessPayment[[Process payment]]:::processingLayer
    PaymentCheck{Payment successful?}:::warning
    PaymentFailed[Payment failed]:::error

    %% Restaurant notification
    NotifyRestaurant[[Notify restaurant]]:::communicationLayer
    RestaurantPrepares[[Restaurant prepares food]]:::processingLayer

    %% Delivery assignment
    AssignDriver[[Assign delivery driver]]:::processingLayer
    DriverPickup[[Driver picks up order]]:::operational
    DriverDelivery[[Driver delivers to customer]]:::operational

    %% Completion
    OrderComplete([Order marked complete]):::operational

    %% Flow connections
    CustomerOrder --> ValidateOrder
    ValidateOrder -->|No| ItemsUnavailable
    ItemsUnavailable --> OrderCancelled

    ValidateOrder -->|Yes| ProcessPayment
    ProcessPayment --> PaymentCheck
    PaymentCheck -->|Failed| PaymentFailed
    PaymentFailed --> OrderCancelled

    PaymentCheck -->|Success| NotifyRestaurant
    NotifyRestaurant --> RestaurantPrepares
    RestaurantPrepares --> AssignDriver
    AssignDriver --> DriverPickup
    DriverPickup --> DriverDelivery
    DriverDelivery --> OrderComplete

    %% =========================================
    %% SEMANTIC COLOR DEFINITIONS
    %% =========================================

    %% State colors
    classDef operational fill:#4CAF50,stroke:#2E7D32,color:#FFFFFF,stroke-width:2px
    classDef warning fill:#FFC107,stroke:#F57C00,color:#000000,stroke-width:2px
    classDef error fill:#F44336,stroke:#C62828,color:#FFFFFF,stroke-width:2px
    classDef info fill:#2196F3,stroke:#1565C0,color:#FFFFFF,stroke-width:2px
    classDef inactive fill:#9E9E9E,stroke:#616161,color:#FFFFFF,stroke-width:2px

    %% Architectural layer colors
    classDef dataLayer fill:#E3F2FD,stroke:#1565C0,color:#0D47A1,stroke-width:1px
    classDef processingLayer fill:#E8F5E9,stroke:#2E7D32,color:#1B5E20,stroke-width:1px
    classDef storageLayer fill:#FFF3E0,stroke:#E65100,color:#BF360C,stroke-width:1px
    classDef communicationLayer fill:#F3E5F5,stroke:#7B1FA2,color:#4A148C,stroke-width:1px
    classDef presentationLayer fill:#E0F2F1,stroke:#00796B,color:#004D40,stroke-width:1px